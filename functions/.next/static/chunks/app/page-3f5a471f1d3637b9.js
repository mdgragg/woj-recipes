(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{592:(e,t,s)=>{Promise.resolve().then(s.bind(s,7904)),Promise.resolve().then(s.bind(s,8260))},7904:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var r=s(5155),a=s(2115),l=s(6046);function n(){let[e,t]=(0,a.useState)(""),[s,n]=(0,a.useState)(""),[i,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[u,p]=(0,a.useState)(""),h=(0,l.useRouter)(),m=async r=>{r.preventDefault(),p("");try{let r=c.split(",").map(e=>e.trim().toLowerCase()).filter(e=>""!==e),a=await fetch("/api/recipes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,ingredients:s.split("\n").filter(e=>""!==e.trim()),directions:i,tags:r})}),l=await a.text();if(console.log("Raw Response:",l),a.ok){let e=JSON.parse(l);console.log("Parsed Response:",e),t(""),n(""),o(""),d(""),h.push("/recipes/".concat(e.slug))}else{let e=JSON.parse(l);console.error("API Error Response:",e),p(e.error||"Failed to add recipe. Please try again.")}}catch(e){console.error("Error adding recipe:",e),p("An unexpected error occurred while adding the recipe. Please try again.")}};return(0,r.jsxs)("form",{onSubmit:m,className:"space-y-4 mb-8",children:[u&&(0,r.jsx)("div",{className:"text-red-500",children:u}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"title",className:"block mb-1",children:"Title:"}),(0,r.jsx)("input",{type:"text",id:"title",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full p-2 border rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"ingredients",className:"block mb-1",children:"Ingredients (one per line):"}),(0,r.jsx)("textarea",{id:"ingredients",value:s,onChange:e=>n(e.target.value),required:!0,className:"w-full p-2 border rounded",rows:5})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"directions",className:"block mb-1",children:"Directions:"}),(0,r.jsx)("textarea",{id:"directions",value:i,onChange:e=>o(e.target.value),required:!0,className:"w-full p-2 border rounded",rows:5})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"tags",className:"block mb-1",children:"Tags (comma separated):"}),(0,r.jsx)("input",{type:"text",id:"tags",value:c,onChange:e=>d(e.target.value),className:"w-full p-2 border rounded",placeholder:"e.g. vegetarian, quick, dessert"})]}),(0,r.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Add Recipe"})]})}},8260:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var r=s(5155),a=s(2115),l=s(4839),n=s.n(l),i=s(6046);function o(e){let{initialRecipes:t}=e,[s,l]=(0,a.useState)(t),[o,c]=(0,a.useState)([]),d=(0,i.useRouter)(),u=(0,i.useSearchParams)();(0,a.useEffect)(()=>{c(u.getAll("tags"))},[u]),(0,a.useEffect)(()=>{l(o.length>0?t.filter(e=>e.tags.some(e=>o.map(e=>e.toLowerCase()).includes(e.toLowerCase()))):t)},[o,t]);let p=Array.from(new Set(t.flatMap(e=>e.tags))),h=e=>{let t=e.toLowerCase(),s=o.map(e=>e.toLowerCase()).includes(t)?o.filter(e=>e.toLowerCase()!==t):[...o,e],r=new URLSearchParams;s.forEach(e=>r.append("tags",e)),d.push("?".concat(r.toString()),{scroll:!1})};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-4 flex flex-wrap gap-2",children:[(0,r.jsx)("button",{onClick:()=>h("All"),className:"px-3 py-1 rounded-full text-sm ".concat(0===o.length?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"),children:"All"}),p.map(e=>(0,r.jsx)("button",{onClick:()=>h(e),className:"px-3 py-1 rounded-full text-sm ".concat(o.map(e=>e.toLowerCase()).includes(e.toLowerCase())?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"),children:e},e))]}),(0,r.jsx)("ul",{className:"space-y-2",children:s.length>0?s.map(e=>(0,r.jsx)("li",{className:"py-2",children:(0,r.jsx)(n(),{href:"/recipes/".concat(encodeURIComponent(e.title.toLowerCase().replace(/ /g,"-"))),className:"text-blue-600 hover:underline",children:e.title})},e.title)):(0,r.jsx)("li",{children:"No recipes found for the selected tags."})})]})}function c(e){let{initialRecipes:t}=e;return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(o,{initialRecipes:t})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[598,441,517,358],()=>t(592)),_N_E=e.O()}]);